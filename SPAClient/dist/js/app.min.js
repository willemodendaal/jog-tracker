(function() {
    var apiModule = angular.module('jogTracker.api', []);

    var baseUrl = 'https://dev.jogTracker.api/api/v1';

    apiModule.constant('apiUrls', {
        register: baseUrl + '/account/register',
        registerAsAdmin: baseUrl + '/account/registerAsAdmin',
        requestResetPwd: baseUrl + '/account/requestResetPwd',
        resetPwd: baseUrl + '/account/resetPwd'
    });

}());


angular.module('jogTracker', ['jogTracker.api', 'ui.router'])

    .config(function($stateProvider, $urlRouterProvider){

        //By default, go home.
        $urlRouterProvider.otherwise("/");

        $stateProvider
            .state('login', {
                url: "/login",
                templateUrl: "partials/login.html"
            })
            .state('register', {
                url: "/register",
                templateUrl: "partials/register.html"
            })
            .state('main', {
                url: "/",
                templateUrl: "partials/main.html"
            })
            .state('main.jogs', {
                url: "jogs",
                templateUrl: "partials/main.jogs.html"
            })
            .state('main.reports', {
                url: "reports",
                templateUrl: "partials/main.reports.html"
            })
            .state('main.admin', { //For admin functions, like user maintenance.
                url: "admin",
                templateUrl: "partials/main.admin.html"
            });
    });

(function () {

    angular
        .module('jogTracker')
        .controller('mainController', mainController);

    mainController.$inject = ['$scope', '$log', 'jogDataFactory', 'accountFactory'];

    function mainController($scope, $log, jogDataFactory, accountFactory) {
        $scope.registerPlease = function () {
            var p = accountFactory.register($scope.email, $scope.firstName, $scope.lastName, $scope.password);

            p.then(function () {
                alert('Registration done, and happy.');
            })
                .catch(function () {
                    alert('something went wrong.');
                });
        };

        $log.info('Main controller loaded.');
    }

}());

(function() {

    angular.module('jogTracker.api')
        .factory('accountFactory', accountFactory);

    accountFactory.$inject = ['$log', '$http', 'apiUrls'];

    function accountFactory($log, $http, apiUrls) {

        var register = function(email, firstName, lastName, password) {

            var payload = {
                email: email,
                firstName: firstName,
                lastName: lastName,
                password: password
            };

            return $http.post(apiUrls.register, payload).
                success(function (data, status, headers, config) {
                    $log.info('Register success.');
                }).
                error(function (data, status, headers, config) {
                    $log.info('register failure.');
                });
        };

        return {
            register : register
        };
    }
}());


(function() {

    angular.module('jogTracker.api')
        .factory('jogDataFactory', jogDataFactory);

    jogDataFactory.$inject = ['$log'];

    function jogDataFactory($log) {
        $log.info('jogDataFactory loaded.');

        return 100;
    }
}());

//# sourceMappingURL=app.min.js.map